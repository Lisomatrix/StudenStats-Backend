{"version":3,"sources":["../static/js/22.c364753d.chunk.js","containers/Teacher/LessonManagement/lesson-management.js","webpack:///./src/styles/lesson-management.less?9ece","styles/lesson-management.less"],"names":["webpackJsonp","1288","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","canChangeAbsences","lessonDate","currentDate","Date","parts","split","date","substring","setUTCDate","setUTCMonth","setUTCFullYear","__WEBPACK_IMPORTED_MODULE_23_moment___default","isSame","getStudentAbsences","studentId","absences","selectedLesson","foundAbsences","i","length","tempAbsence","lessonId","push","generateRow","studentAbsences","student","material","discipline","late","presence","forEach","absence","absenceType","newRow","key","name","face","photo","options","mobileRow","getRowsV1","selectedClass","data","mobileData","students","row","getClass","classes","classId","defineProperty","materialId","lateId","disciplineId","presenceId","__WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__","__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__","n","__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default","__WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_table__","__WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default","__WEBPACK_IMPORTED_MODULE_4_antd_lib_button_style__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_button__","__WEBPACK_IMPORTED_MODULE_5_antd_lib_button___default","__WEBPACK_IMPORTED_MODULE_6_antd_lib_dropdown_style__","__WEBPACK_IMPORTED_MODULE_7_antd_lib_dropdown__","__WEBPACK_IMPORTED_MODULE_7_antd_lib_dropdown___default","__WEBPACK_IMPORTED_MODULE_8_antd_lib_icon_style__","__WEBPACK_IMPORTED_MODULE_9_antd_lib_icon__","__WEBPACK_IMPORTED_MODULE_9_antd_lib_icon___default","__WEBPACK_IMPORTED_MODULE_10_antd_lib_menu_style__","__WEBPACK_IMPORTED_MODULE_11_antd_lib_menu__","__WEBPACK_IMPORTED_MODULE_11_antd_lib_menu___default","__WEBPACK_IMPORTED_MODULE_12_antd_lib_checkbox_style__","__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox__","__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default","__WEBPACK_IMPORTED_MODULE_14_antd_lib_avatar_style__","__WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar__","__WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar___default","__WEBPACK_IMPORTED_MODULE_16_antd_lib_message_style__","__WEBPACK_IMPORTED_MODULE_17_antd_lib_message__","__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default","__WEBPACK_IMPORTED_MODULE_18_antd_lib_input_style__","__WEBPACK_IMPORTED_MODULE_19_antd_lib_input__","__WEBPACK_IMPORTED_MODULE_19_antd_lib_input___default","__WEBPACK_IMPORTED_MODULE_20_antd_lib_select_style__","__WEBPACK_IMPORTED_MODULE_21_antd_lib_select__","__WEBPACK_IMPORTED_MODULE_21_antd_lib_select___default","__WEBPACK_IMPORTED_MODULE_22_react__","__WEBPACK_IMPORTED_MODULE_22_react___default","__WEBPACK_IMPORTED_MODULE_23_moment__","__WEBPACK_IMPORTED_MODULE_24_react_redux__","__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__","__WEBPACK_IMPORTED_MODULE_26__redux_actions_websocketActions_lesson__","__WEBPACK_IMPORTED_MODULE_27__styles_lesson_management_less__","__WEBPACK_IMPORTED_MODULE_28_shouldcomponentupdate_children__","__WEBPACK_IMPORTED_MODULE_29_util__","__WEBPACK_IMPORTED_MODULE_30__redux_actions_restActions_lesson__","__WEBPACK_IMPORTED_MODULE_31__redux_actions_restActions_discipline__","__WEBPACK_IMPORTED_MODULE_32__redux_actions_restActions_absence__","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","Option","a","TextArea","disciplinarAbsenceData","undefined","checked","LessonMagement","_Component","this","_this","getPrototypeOf","markDisciplinarAbsenceConfirm","state","disciplineDescriptionText","trim","error","setState","disciplineModalVisible","markAbsence","showAbsenceModal","changeDisciplineDescription","e","changeSummary","summaryText","showSummary","selectedDiscipline","teacherId","summaryVisible","previewImage","parentElement","id","image","find","element","previewImageURL","previewVisible","cancelPreviewImage","lessons","lesson","summary","updateSummary","requestLessonSummaryUpdate","success","triggerMissing","rows","getStudentRow","parseInt","newData","newMobileData","triggerMaterial","triggerLate","triggerDiscipline","absenceTypeId","justificable","description","arguments","absenceId","requestMarkAbsence","handleLessonChange","canChangeLesson","selectedLessonDate","slice","replace","found","sendGetAbsencesByLessonComplete","getAbsencesLoading","lessonChanged","absenceExist","getAbsences","handleClassChange","getStudentsLoading","sendGetStudentsComplete","handleDisciplineChange","tempLesson","getLessonLoading","sendGetLessonsComplete","getLessons","createNewLesson","addLessonLoading","newLesson","requestNewLesson","then","Response","status","requestClassLessons","getStudents","sendGetStudents","requestLessonAbsences","idsSet","newLessonModalVisible","nextProps","nextState","rowKey","teacherDisciplines","requestTeacherDisciplines","absenceTypes","addSuccess","lastestLesson","lastestLessonId","lessonNumber","dateString","getDate","getMonth","getFullYear","sendAddLessonComplete","_this2","getSuccess","avaibleClasses","avaibleDisciplines","avaibleLessons","_this3","mobileColumns","title","dataIndex","width","render","text","index","isPhoto","createElement","className","size","src","icon","href","menu","Item","onChange","overlay","trigger","type","columns","toString","map","item","abbreviation","window","innerWidth","style","gridRow","gridColumn","placeholder","disabled","theme","loading","onClick","rowClassName","marginLeft","marginRight","dataSource","visible","footer","onCancel","padding","marginTop","mapDispatchToProps","sendGetLessons","sendCreateLesson","sendGetAbsencesByLesson","sendMarkAbsence","sendUpdateSummary","setUpdateSummary","mapStateToProps","authentication","userRoleId","disciplines","1289","exports","content","hmr","transform","locals","1290","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/22.c364753d.chunk.js","sourcesContent":["webpackJsonp([22],{\n\n/***/ 1288:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__ = __webpack_require__(172);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_lib_modal_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__ = __webpack_require__(173);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__ = __webpack_require__(575);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_lib_table_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_table__ = __webpack_require__(576);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_lib_table__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_button_style__ = __webpack_require__(168);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_button_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_lib_button_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_button__ = __webpack_require__(90);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_lib_button___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_lib_button__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_lib_dropdown_style__ = __webpack_require__(617);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_lib_dropdown_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_antd_lib_dropdown_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_dropdown__ = __webpack_require__(607);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_lib_dropdown___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_antd_lib_dropdown__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_lib_icon_style__ = __webpack_require__(92);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_lib_icon_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_antd_lib_icon_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_lib_icon__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_lib_icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_antd_lib_icon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_antd_lib_menu_style__ = __webpack_require__(606);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_antd_lib_menu_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_antd_lib_menu_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_antd_lib_menu__ = __webpack_require__(600);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_antd_lib_menu___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_antd_lib_menu__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_antd_lib_checkbox_style__ = __webpack_require__(620);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_antd_lib_checkbox_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_antd_lib_checkbox_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox__ = __webpack_require__(605);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_antd_lib_avatar_style__ = __webpack_require__(592);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_antd_lib_avatar_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_antd_lib_avatar_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar__ = __webpack_require__(593);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_antd_lib_message_style__ = __webpack_require__(169);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_antd_lib_message_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16_antd_lib_message_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_antd_lib_message__ = __webpack_require__(170);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_17_antd_lib_message__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18_antd_lib_input_style__ = __webpack_require__(570);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18_antd_lib_input_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_18_antd_lib_input_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19_antd_lib_input__ = __webpack_require__(574);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19_antd_lib_input___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_19_antd_lib_input__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20_antd_lib_select_style__ = __webpack_require__(573);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20_antd_lib_select_style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_20_antd_lib_select_style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_antd_lib_select__ = __webpack_require__(572);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_antd_lib_select___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_21_antd_lib_select__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_22_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_moment__ = __webpack_require__(89);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_23_moment__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24_react_redux__ = __webpack_require__(88);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__ = __webpack_require__(649);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__redux_actions_websocketActions_lesson__ = __webpack_require__(672);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__styles_lesson_management_less__ = __webpack_require__(1289);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__styles_lesson_management_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_27__styles_lesson_management_less__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28_shouldcomponentupdate_children__ = __webpack_require__(167);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29_util__ = __webpack_require__(616);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29_util___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_29_util__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__redux_actions_restActions_lesson__ = __webpack_require__(844);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__redux_actions_restActions_discipline__ = __webpack_require__(578);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__redux_actions_restActions_absence__ = __webpack_require__(618);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Option=__WEBPACK_IMPORTED_MODULE_21_antd_lib_select___default.a.Option;var TextArea=__WEBPACK_IMPORTED_MODULE_19_antd_lib_input___default.a.TextArea;var materialId;var lateId;var disciplineId;var presenceId;var disciplinarAbsenceData={studentId:undefined,checked:undefined};function canChangeAbsences(lessonDate){var currentDate=new Date();var parts=lessonDate.split(\"-\");var date=new Date();parts[2]=parts[2].substring(0,4);date.setUTCDate(parts[0]);date.setUTCMonth(parts[1]-1);date.setUTCFullYear(parts[2]);if(__WEBPACK_IMPORTED_MODULE_23_moment___default()(date).isSame(currentDate,\"day\")){return true;}else{return false;}}function getStudentAbsences(studentId,absences,selectedLesson){if(absences){var foundAbsences=[];for(var i=0;i<absences.length;i++){var tempAbsence=absences[i];if(tempAbsence.studentId===studentId&&tempAbsence.lessonId===selectedLesson){foundAbsences.push(tempAbsence);}if(foundAbsences.length>=5){break;}}return foundAbsences;}}function generateRow(studentAbsences,student){var material=false;var discipline=false;var late=false;var presence=false;studentAbsences.forEach(function(absence){switch(absence.absenceType){case\"DISCIPLINAR\":{discipline=true;break;}case\"MATERIAL\":{material=true;break;}case\"PRESENCA\":{presence=true;break;}case\"ATRASO\":{late=true;break;}default:break;}});var newRow={key:student.studentId,name:student.name,face:student.photo?student.photo:\"user\",material:material,presence:presence,late:late,discipline:discipline};var options={material:material,presence:presence,late:late,discipline:discipline};var mobileRow={key:student.studentId,name:student.name,face:student.photo?student.photo:\"user\",options:options};return{newRow:newRow,mobileRow:mobileRow};}function getRowsV1(selectedClass,absences,selectedLesson){var data=[];var mobileData=[];for(var i=0;i<selectedClass.students.length;i++){var studentAbsences=[];if(absences){studentAbsences=getStudentAbsences(selectedClass.students[i].studentId,absences,selectedLesson);}var row=generateRow(studentAbsences,selectedClass.students[i]);data.push(row.newRow);mobileData.push(row.mobileRow);}return{data:data,mobileData:mobileData};}function getClass(selectedClass,classes){for(var i=0;i<classes.length;i++){if(classes[i].classId===selectedClass){return classes[i];}}}var LessonMagement=function(_Component){_inherits(LessonMagement,_Component);function LessonMagement(props){_classCallCheck(this,LessonMagement);var _this=_possibleConstructorReturn(this,(LessonMagement.__proto__||Object.getPrototypeOf(LessonMagement)).call(this,props));_this.markDisciplinarAbsenceConfirm=function(){if(_this.state.disciplineDescriptionText.trim()===\"\"){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"É necessário uma descrição!\");}else{_this.setState({disciplineModalVisible:false,disciplineDescriptionText:\"\"});_this.markAbsence(disciplineId,disciplinarAbsenceData.studentId,true,disciplinarAbsenceData.checked,_this.state.disciplineDescriptionText);}};_this.showAbsenceModal=function(){_this.setState({disciplineModalVisible:true});};_this.changeDisciplineDescription=function(e){return _this.setState({disciplineDescriptionText:e.target.value});};_this.changeSummary=function(e){return _this.setState({summaryText:e.target.value});};_this.showSummary=function(){if(_this.state.selectedClass&&_this.state.selectedDiscipline&&_this.state.selectedLesson&&_this.props.teacherId){_this.setState({summaryVisible:true});}else{if(!_this.state.selectedClass&&!_this.state.selectedDiscipline){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma turma, disciplina e lição\");}else if(!_this.state.selectedClass){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma turma\");}else if(!_this.state.selectedDiscipline){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma disciplina\");}else if(!_this.state.selectedLesson){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma lição\");}}};_this.previewImage=function(e){var row=e.target.parentElement.id;var image=_this.state.data.find(function(element){if(element.key===row){return element;}});_this.setState({previewImageURL:image.face,previewVisible:true});};_this.cancelPreviewImage=function(e){if(_this.state.summaryVisible){_this.props.lessons.find(function(lesson){if(lesson.lessonId===_this.state.selectedLesson&&_this.state.summaryText!==lesson.summary){var updateSummary={lessonId:_this.state.selectedLesson,summary:_this.state.summaryText};lesson.summary=_this.state.summaryText;_this.props.requestLessonSummaryUpdate(updateSummary);// this.props.setUpdateSummary(lesson);\n__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.success(\"Sumário atualizado!\");}});}_this.setState({previewVisible:false,summaryVisible:false});};_this.triggerMissing=function(e){if(Object(__WEBPACK_IMPORTED_MODULE_29_util__[\"isNull\"])(_this.state.selectedDiscipline)){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma disciplina\");return;}else if(Object(__WEBPACK_IMPORTED_MODULE_29_util__[\"isNull\"])(_this.state.selectedLesson)){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma lição\");return;}var rows=_this.getStudentRow(parseInt(e.target.id));if(rows.row.presence===true&&!_this.state.canChangeAbsences){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Só pode remover faltas no proprio dia!\");}else{rows.row.presence=e.target.checked;rows.mobileRow.options.presence=e.target.checked;var newData=_this.state.data;var newMobileData=_this.state.mobileData;newData[e.target.id-1]=rows.row;newMobileData[e.target.id-1]=rows.mobileRow;_this.markAbsence(presenceId,e.target.id,true,e.target.checked,e.target.id);_this.setState({data:newData,mobileData:newMobileData});}};_this.triggerMaterial=function(e){if(Object(__WEBPACK_IMPORTED_MODULE_29_util__[\"isNull\"])(_this.state.selectedDiscipline)){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma disciplina\");return;}else if(Object(__WEBPACK_IMPORTED_MODULE_29_util__[\"isNull\"])(_this.state.selectedLesson)){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma lição\");return;}var rows=_this.getStudentRow(parseInt(e.target.id));if(rows.row.material===true&&!_this.state.canChangeAbsences){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Só pode remover faltas no proprio dia!\");}else{rows.row.material=e.target.checked;rows.mobileRow.options.material=e.target.checked;var newData=_this.state.data;var newMobileData=_this.state.mobileData;newData[e.target.id-1]=rows.row;newMobileData[e.target.id-1]=rows.mobileRow;_this.markAbsence(materialId,e.target.id,false,e.target.checked);_this.setState({data:newData,mobileData:newMobileData});}};_this.triggerLate=function(e){if(Object(__WEBPACK_IMPORTED_MODULE_29_util__[\"isNull\"])(_this.state.selectedDiscipline)){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma disciplina\");return;}else if(Object(__WEBPACK_IMPORTED_MODULE_29_util__[\"isNull\"])(_this.state.selectedLesson)){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma lição\");return;}var rows=_this.getStudentRow(parseInt(e.target.id));if(rows.row.late===true&&!_this.state.canChangeAbsences){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Só pode remover faltas no proprio dia!\");}else{rows.row.late=e.target.checked;rows.mobileRow.options.late=e.target.checked;var newData=_this.state.data;var newMobileData=_this.state.mobileData;newData[e.target.id-1]=rows.row;newMobileData[e.target.id-1]=rows.mobileRow;_this.markAbsence(lateId,e.target.id,true,e.target.checked);_this.setState({data:newData,mobileData:newMobileData});}};_this.triggerDiscipline=function(e){if(Object(__WEBPACK_IMPORTED_MODULE_29_util__[\"isNull\"])(_this.state.selectedDiscipline)){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma disciplina\");return;}else if(Object(__WEBPACK_IMPORTED_MODULE_29_util__[\"isNull\"])(_this.state.selectedLesson)){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma lição\");return;}var rows=_this.getStudentRow(parseInt(e.target.id));if(rows.row.discipline){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Não pode remover faltas disciplinares!\");}else{rows.row.discipline=e.target.checked;rows.mobileRow.options.discipline=e.target.checked;var newData=_this.state.data;var newMobileData=_this.state.mobileData;newData[e.target.id-1]=rows.row;newMobileData[e.target.id-1]=rows.mobileRow;if(e.target.checked){_this.showAbsenceModal();disciplinarAbsenceData.studentId=e.target.id;disciplinarAbsenceData.checked=e.target.checked;}else{_this.markAbsence(disciplineId,e.target.id,true,e.target.checked);}_this.setState({data:newData,mobileData:newMobileData});}};_this.markAbsence=function(absenceTypeId,studentId,justificable,create){var description=arguments.length>4&&arguments[4]!==undefined?arguments[4]:\"\";var absenceId=arguments[5];var absence={studentId:studentId,disciplineId:_this.state.selectedDiscipline,lessonId:_this.state.selectedLesson,justificable:justificable,absenceType:absenceTypeId,create:create,description:description,absenceId:absenceId};_this.props.requestMarkAbsence(absence);};_this.handleLessonChange=function(value){_this.setState({selectedLesson:value},function(){_this.props.lessons.find(function(lesson){if(lesson.lessonId===_this.state.selectedLesson){var canChangeLesson=canChangeAbsences(lesson.date);_this.setState({summaryText:lesson.summary,selectedLessonDate:lesson.date.slice(0,10).replace(\"-\",\"/\").replace(\"-\",\"/\"),canChangeAbsences:canChangeLesson});}});if(_this.props.absences){var found=false;for(var i=0;i<_this.props.absences.length;i++){var tempAbsence=_this.props.absences[i];if(tempAbsence.lessonId===_this.state.selectedLesson){found=true;break;}}if(!found){_this.getAbsences();}else{_this.props.sendGetAbsencesByLessonComplete();_this.setState({getAbsencesLoading:true,lessonChanged:true,absenceExist:true},function(){});}}else{_this.getAbsences();}});};_this.handleClassChange=function(value){_this.setState({selectedClass:value,selectedDiscipline:null,selectedLesson:null},function(){_this.setState({getStudentsLoading:false});_this.props.sendGetStudentsComplete();});};_this.handleDisciplineChange=function(value){_this.setState({selectedDiscipline:value,selectedLesson:null},function(){if(_this.props.lessons){var found=false;for(var i=0;i<_this.props.lessons.length;i++){var tempLesson=_this.props.lessons[i];if(tempLesson.disciplineId===_this.state.selectedDiscipline&&tempLesson.classId===_this.state.selectedClass){found=true;break;}}if(!found){_this.getLessons();}else{_this.setState({getLessonLoading:false,lessonChanged:true});_this.props.sendGetLessonsComplete();}}else{_this.getLessons();}});};_this.createNewLesson=function(){if(_this.state.selectedClass&&_this.state.selectedDiscipline&&_this.props.teacherId){_this.setState({addLessonLoading:true},function(){var newLesson={disciplineId:_this.state.selectedDiscipline,classId:_this.state.selectedClass,teacherId:_this.props.teacherId};_this.props.requestNewLesson(newLesson).then(function(Response){if(Response.status){_this.setState({addLessonLoading:false},function(){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Não é possível criar mais lições para esta disciplina!\");});}});});}else{if(!_this.state.selectedClass&&!_this.state.selectedDiscipline){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma turma e disciplina\");}else if(!_this.state.selectedClass){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma turma\");}else if(!_this.state.selectedDiscipline){__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.error(\"Selecione uma disciplina\");}}};_this.getLessons=function(){_this.setState({getLessonLoading:true,lessonChanged:true},function(){_this.props.requestClassLessons(_this.state.selectedClass,_this.state.selectedDiscipline);});};_this.getStudents=function(){_this.setState({getStudentsLoading:true},function(){var getStudents={classId:_this.state.selectedClass};_this.props.sendGetStudents(getStudents);});};_this.getAbsences=function(){_this.props.requestLessonAbsences(_this.state.selectedLesson);_this.setState({getAbsencesLoading:true,lessonChanged:true},function(){});};_this.state={data:[],mobileData:[],previewImageURL:\"\",previewVisible:false,summaryVisible:false,selectedClass:null,selectedLesson:null,selectedLessonDate:\"\",canChangeAbsences:false,selectedDiscipline:null,addLessonLoading:false,getLessonLoading:false,getStudentsLoading:false,getAbsencesLoading:false,lessonChanged:true,absenceExist:false,idsSet:false,summaryText:\"\",disciplineModalVisible:false,disciplineDescriptionText:\"\",newLessonModalVisible:false};return _this;}_createClass(LessonMagement,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){return Object(__WEBPACK_IMPORTED_MODULE_28_shouldcomponentupdate_children__[\"a\" /* shallowEqual */])(this.props,nextProps,this.state,nextState);}},{key:\"getStudentRow\",value:function getStudentRow(rowKey){var mobileRow;var row;for(var i=0;i<this.state.data.length;i++){if(this.state.data[i].key===rowKey){row=this.state.data[i];}if(this.state.mobileData[i].key===rowKey){mobileRow=this.state.mobileData[i];}}return{row:row,mobileRow:mobileRow};}},{key:\"componentWillUpdate\",value:function componentWillUpdate(nextProps,nextState){if(!nextProps.teacherDisciplines){this.props.requestTeacherDisciplines();}if(nextProps.classes){var selectedClass=getClass(nextState.selectedClass,nextProps.classes);if(selectedClass){var rows=getRowsV1(selectedClass,nextProps.absences,nextState.selectedLesson);nextState.lessonChanged=false;nextState.getAbsencesLoading=false;nextState.data=rows.data;nextState.mobileData=rows.mobileData;nextState.absenceExist=false;this.props.sendGetAbsencesByLessonComplete();}}if(!this.state.idsSet&&nextProps.absenceTypes){for(var i=0;i<nextProps.absenceTypes.length;i++){if(nextProps.absenceTypes[i].name===\"DISCIPLINAR\"){disciplineId=nextProps.absenceTypes[i].absenceTypeId;}if(nextProps.absenceTypes[i].name===\"MATERIAL\"){materialId=nextProps.absenceTypes[i].absenceTypeId;}if(nextProps.absenceTypes[i].name===\"PRESENCA\"){presenceId=nextProps.absenceTypes[i].absenceTypeId;}if(nextProps.absenceTypes[i].name===\"ATRASO\"){lateId=nextProps.absenceTypes[i].absenceTypeId;}}nextState.idsSet=true;}if(this.state.addLessonLoading){if(nextProps.addSuccess===true){var lastestLesson=0;var lastestLessonId=0;for(var i=0;i<this.props.lessons.length;i++){var tempLesson=this.props.lessons[i];if(tempLesson.disciplineId===this.state.selectedDiscipline&&tempLesson.classId===this.state.selectedClass&&tempLesson.lessonNumber>lastestLesson){lastestLesson=tempLesson.lessonNumber;lastestLessonId=tempLesson.lessonId;}}var currentDate=new Date();var dateString=currentDate.getDate()+\"/\"+(currentDate.getMonth()+1)+\"/\"+currentDate.getFullYear();nextState.addLessonLoading=false;nextState.selectedLesson=lastestLessonId;nextState.selectedLessonDate=dateString;this.props.sendAddLessonComplete();this.handleLessonChange(lastestLessonId);__WEBPACK_IMPORTED_MODULE_17_antd_lib_message___default.a.success(\"Nova lição criada!\");}}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var _this2=this;if(this.state.getLessonLoading){if(nextProps.getSuccess===true){this.setState({getLessonLoading:false},function(){_this2.props.sendGetLessonsComplete();});}}if(this.state.getStudentsLoading){if(nextProps.getStudents===true){this.setState({getStudentsLoading:false},function(){_this2.props.sendGetStudentsComplete();});}}if(this.state.lessonChanged){if(nextProps.getAbsences===true){this.setState({getAbsencesLoading:false,lessonChanged:false},function(){_this2.props.sendGetAbsencesByLessonComplete();});}}}},{key:\"render\",value:function render(){var _this3=this;var mobileColumns=[{title:\"Foto\",dataIndex:\"face\",key:\"face\",width:\"20%\",render:function render(text,row,index){var isPhoto=text!==\"user\";return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"button\",{className:\"reset-btn\",id:row.key},isPhoto?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar___default.a,{id:row.key,className:\"icon\",size:\"user\",src:text}):__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar___default.a,{id:row.key,className:\"icon\",size:\"user\",icon:\"user\"}));}},,{title:\"Nome\",dataIndex:\"name\",key:\"name\",width:\"35%\",render:function render(text){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"a\",{href:\"javascript:;\"},text);}},{title:\"Opções\",dataIndex:\"options\",key:\"options\",width:\"45%\",render:function render(text,row,index){var material=false;var presence=false;var late=false;var discipline=false;if(text){material=text.material;presence=text.presence;late=text.late;discipline=text.discipline;}var menu=__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_antd_lib_menu___default.a,null,__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_antd_lib_menu___default.a.Item,{key:\"0\"},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default.a,{checked:material,onChange:_this3.triggerMaterial,id:row.key},\"Falta de Material\")),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_antd_lib_menu___default.a.Item,{key:\"1\"},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default.a,{checked:presence,onChange:_this3.triggerMissing,id:row.key},\"Falta de Presenca\")),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_antd_lib_menu___default.a.Item,{key:\"3\"},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default.a,{checked:late,onChange:_this3.triggerLate,id:row.key},\"Falta de Atraso\")),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11_antd_lib_menu___default.a.Item,{key:\"4\"},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default.a,{checked:discipline,onChange:_this3.triggerDiscipline,id:row.key},\"Falta Disciplinar\")));return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_antd_lib_dropdown___default.a,{overlay:menu,trigger:[\"click\"]},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"a\",{className:\"ant-dropdown-link\",href:\"#\"},\"Op\\xE7\\xF5es \",__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_lib_icon___default.a,{type:\"down\"})));}}];var columns=[{title:\"Foto\",dataIndex:\"face\",key:\"face\",width:\"15%\",render:function render(text,row,index){var isPhoto=text!==\"user\";return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"button\",{className:\"reset-btn\",id:row.key},isPhoto?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar___default.a,{id:row.key,className:\"icon\",size:\"user\",src:text}):__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15_antd_lib_avatar___default.a,{id:row.key,className:\"icon\",size:\"user\",icon:\"user\"}));}},{title:\"Nome\",dataIndex:\"name\",key:\"name\",width:\"20%\",render:function render(text){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"a\",{href:\"javascript:;\"},text);}},{title:\"Falta de Material\",dataIndex:\"material\",key:\"material\",width:\"15%\",render:function render(text,row,index){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default.a,{className:row.key,id:row.key.toString(),onChange:_this3.triggerMaterial,checked:text});}},{title:\"Falta de Presença\",dataIndex:\"presence\",key:\"presence\",width:\"15%\",render:function render(text,row,index){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default.a,{className:row.key,id:row.key.toString(),onChange:_this3.triggerMissing,checked:text});}},{title:\"Falta de Atraso\",dataIndex:\"late\",key:\"late\",width:\"15%\",render:function render(text,row,index){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default.a,{className:row.key,id:row.key.toString(),onChange:_this3.triggerLate,checked:text});}},{title:\"Falta Disciplinar\",dataIndex:\"discipline\",key:\"discipline\",width:\"20%\",render:function render(text,row,index){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13_antd_lib_checkbox___default.a,{className:row.key,id:row.key.toString(),onChange:_this3.triggerDiscipline,checked:text});}}];var avaibleClasses;var avaibleDisciplines;var avaibleLessons;if(this.props.classes){avaibleClasses=this.props.classes.map(function(item){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(Option,{key:item.classId,value:item.classId},item.name);});}if(this.props.teacherDisciplines){avaibleDisciplines=this.props.teacherDisciplines.map(function(item){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(Option,{key:item.disciplineId,value:item.disciplineId},item.abbreviation);});}if(this.props.lessons){avaibleLessons=this.props.lessons.map(function(item){if(item.disciplineId===_this3.state.selectedDiscipline&&item.classId===_this3.state.selectedClass){return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(Option,{key:item.lessonId,value:item.lessonId},item.lessonNumber);}});}return __WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"div\",{className:\"lesson-management-container animated slideInUp\"},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"div\",{className:\"lesson-pickers-container\"},window.innerWidth>500?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"label\",{style:{gridRow:\"1\",gridColumn:\"1\"}},\"Turma:\"):\"\",__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_21_antd_lib_select___default.a,{className:\"class-select\",style:{width:120},placeholder:\"Turma\",onChange:this.handleClassChange},avaibleClasses),window.innerWidth>500?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"label\",{style:{gridRow:\"1\",gridColumn:\"2\"}},\"Disciplina:\"):\"\",__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_21_antd_lib_select___default.a,{value:this.state.selectedDiscipline?this.state.selectedDiscipline:undefined,disabled:this.state.selectedClass?false:true,className:\"discipline-select\",style:{width:120},placeholder:this.state.getStudentsLoading?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_lib_icon___default.a,{type:\"loading\",theme:\"outlined\"}):\"Disciplina\",onChange:this.handleDisciplineChange},avaibleDisciplines),window.innerWidth>500?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"label\",{style:{gridRow:\"1\",gridColumn:\"3\"}},\"Li\\xE7\\xE3o:\"):\"\",__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_21_antd_lib_select___default.a,{value:this.state.selectedLesson?this.state.selectedLesson:undefined,disabled:this.state.selectedDiscipline?false:true,className:\"lesson-select\",style:{width:120},placeholder:this.state.getLessonLoading?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_lib_icon___default.a,{type:\"loading\",theme:\"outlined\"}):\"N.º Lição\",onChange:this.handleLessonChange},avaibleLessons),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"span\",{className:\"lesson-date\"},this.state.selectedLessonDate),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_button___default.a,{loading:this.state.addLessonLoading,onClick:this.createNewLesson,className:\"add-lesson-btn\",type:\"primary\"},\"Nova Li\\xE7\\xE3o\"),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_button___default.a,{className:\"summary-btn\",onClick:this.showSummary,type:\"primary\"},\"Sum\\xE1rio\")),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_lib_table___default.a,{rowClassName:\"animated slideInRight\",loading:this.state.getLessonLoading||this.state.getAbsencesLoading,style:{marginLeft:\"5px\",marginRight:\"5px\"},columns:window.innerWidth>600?columns:mobileColumns,dataSource:window.innerWidth>600?this.state.data:this.state.mobileData}),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default.a,{visible:this.state.previewVisible||this.state.summaryVisible,footer:null,onCancel:this.cancelPreviewImage},this.state.previewVisible?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"img\",{style:{width:\"100%\",padding:\"15px\"},src:this.state.previewImageURL}):\"\",this.state.summaryVisible?__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"div\",{className:\"sumary-container\"},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"h3\",{className:\"summary-title\"},\"Sum\\xE1rio:\"),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(TextArea,{value:this.state.summaryText,onChange:this.changeSummary,rows:8})):\"\"),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default.a,{visible:this.state.disciplineModalVisible,onCancel:function onCancel(){return _this3.setState({disciplineModalVisible:false});},footer:[__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_button___default.a,{key:\"back\",onClick:function onClick(){return _this3.setState({disciplineModalVisible:false});}},\"Cancelar\"),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_button___default.a,{key:\"submit\",type:\"danger\",onClick:this.markDisciplinarAbsenceConfirm},\"Marcar\")]},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"div\",{style:{marginTop:\"20px\"}},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"h3\",{className:\"summary-title\"},\"Descri\\xE7\\xE3o:\"),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(TextArea,{value:this.state.disciplineDescriptionText,onChange:this.changeDisciplineDescription,rows:8}))),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_lib_modal___default.a,{visible:this.state.newLessonModalVisible,onCancel:function onCancel(){return _this3.setState({newLessonModalVisible:false});},footer:[__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_button___default.a,{key:\"back\",onClick:function onClick(){return _this3.setState({newLessonModalVisible:false,addLessonLoading:false});}},\"Cancelar\"),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_lib_button___default.a,{key:\"submit\",type:\"primary\",onClick:this.markDisciplinarAbsenceConfirm},\"Criar Li\\xE7\\xE3o\")]},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"div\",{style:{marginTop:\"20px\"}},__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"h3\",null,\"Turma: \",this.state.selectedClass),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"h3\",null,\"N\\xBA Licao: \",this.state.selectedLesson),__WEBPACK_IMPORTED_MODULE_22_react___default.a.createElement(\"h3\",null,\"Disciplina: \",this.state.selectedDiscipline))));}}]);return LessonMagement;}(__WEBPACK_IMPORTED_MODULE_22_react__[\"Component\"]);var mapDispatchToProps={sendGetLessons:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"f\" /* sendGetLessons */],sendCreateLesson:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"c\" /* sendCreateLesson */],sendGetLessonsComplete:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"g\" /* sendGetLessonsComplete */],sendAddLessonComplete:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"b\" /* sendAddLessonComplete */],sendGetAbsencesByLesson:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"d\" /* sendGetAbsencesByLesson */],sendGetStudentsComplete:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"i\" /* sendGetStudentsComplete */],sendGetStudents:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"h\" /* sendGetStudents */],sendGetAbsencesByLessonComplete:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"e\" /* sendGetAbsencesByLessonComplete */],sendMarkAbsence:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"j\" /* sendMarkAbsence */],sendUpdateSummary:__WEBPACK_IMPORTED_MODULE_25__redux_actions_websocket__[\"m\" /* sendUpdateSummary */],setUpdateSummary:__WEBPACK_IMPORTED_MODULE_26__redux_actions_websocketActions_lesson__[\"e\" /* setUpdateSummary */],requestNewLesson:__WEBPACK_IMPORTED_MODULE_30__redux_actions_restActions_lesson__[\"c\" /* requestNewLesson */],requestLessonSummaryUpdate:__WEBPACK_IMPORTED_MODULE_30__redux_actions_restActions_lesson__[\"b\" /* requestLessonSummaryUpdate */],requestClassLessons:__WEBPACK_IMPORTED_MODULE_30__redux_actions_restActions_lesson__[\"a\" /* requestClassLessons */],requestTeacherDisciplines:__WEBPACK_IMPORTED_MODULE_31__redux_actions_restActions_discipline__[\"f\" /* requestTeacherDisciplines */],requestLessonAbsences:__WEBPACK_IMPORTED_MODULE_32__redux_actions_restActions_absence__[\"d\" /* requestLessonAbsences */],requestMarkAbsence:__WEBPACK_IMPORTED_MODULE_32__redux_actions_restActions_absence__[\"e\" /* requestMarkAbsence */]};var mapStateToProps=function mapStateToProps(state){return{classes:state.classes.classes,teacherId:state.authentication.userRoleId,teacherDisciplines:state.disciplines.teacherDisciplines,lessons:state.lessons.lessons,getSuccess:state.lessons.getSuccess,addSuccess:state.lessons.addSuccess,absences:state.absences.absences,getStudents:state.students.getStudents,students:state.students.students,getAbsences:state.absences.getAbsences,absenceTypes:state.absences.absenceTypes};};/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_24_react_redux__[\"b\" /* connect */])(mapStateToProps,mapDispatchToProps)(LessonMagement));\n\n/***/ }),\n\n/***/ 1289:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(1290);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(565)(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n/***/ }),\n\n/***/ 1290:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(564)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"body{background-color:rgba(0,0,0,.5)}@media (max-width:600px){.cal{margin:0!important}}.ant-card-bordered{background-color:#f8f8f8!important}.cal-container{padding-left:0;padding-top:0;overflow-y:scroll;height:-webkit-fill-available}.cal{margin:24px;margin-left:0;padding:8px;background-color:#f8f8f8;min-height:-webkit-fill-available;margin-bottom:100px;-webkit-animation-duration:.3s!important;animation-duration:.3s!important}.ant-menu-dark{background-color:#001529!important}.ant-menu-light{background-color:#fff!important}.anticon-bell,.anticon-down,.anticon-menu-fold,.anticon-menu-unfold,.user-label-container .name-container .name{color:rgba(0,0,0,.65)!important}.primary-text,.rc-color-picker-panel-params-input{color:rgba(0,0,0,.65)}.reset-btn{background:none;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-appearance:button;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.ant-table-tbody>tr,.ant-table-thead>tr,.lesson-management-container{-webkit-animation-duration:.3s;animation-duration:.3s}.lesson-management-container{margin:24px;margin-left:0;background-color:#f8f8f8;padding:5px;border-radius:.5em}@media (max-width:500px){.summary-btn{grid-column:1/3!important}.lesson-management-container{margin:8px;border-radius:.5em}.lesson-pickers-container{padding:8px!important;display:grid;grid-template-rows:auto auto!important;grid-template-columns:1fr 1fr!important;grid-gap:8px}.lesson-pickers-container .lesson-date{grid-column:1/3!important;grid-row:4/4!important;text-align:center!important;text-indent:0!important}.lesson-pickers-container .add-lesson-btn{grid-column:2/2!important;grid-row:2/2;width:auto!important}.lesson-pickers-container .class-select{grid-column:1/1!important;grid-row:1/1;width:auto!important}.lesson-pickers-container .lesson-select{grid-column:1/1!important;grid-row:2/2;width:auto!important}.lesson-pickers-container .discipline-select{grid-column:2/2!important;grid-row:1/1;width:auto!important}}.lesson-pickers-container{padding:5px;display:grid;grid-template-rows:auto;grid-template-columns:auto auto auto 1fr auto;grid-gap:8px}.lesson-pickers-container .add-lesson-btn{grid-column:5/5}.lesson-pickers-container .summary-btn{grid-column:6/6}.lesson-pickers-container .class-select{grid-column:1/1}.lesson-pickers-container .lesson-select{grid-column:3/3}.lesson-pickers-container .discipline-select{grid-column:2/2}.lesson-pickers-container .lesson-date{font-size:15px;font-weight:700;padding-top:4px;text-indent:8px;grid-column:4/4}.reset-btn::-moz-focus-inner{border:0;padding:0}.reset-btn:focus{outline:none}.ant-table-pagination.ant-pagination{margin:16px 0;float:right;margin-right:8px}h3.summary-title{font-size:20px;text-indent:8px}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/Lisomatrix/Desktop/NEW_PAP/bac/Frontend/src/styles/lesson-management.less\"],\"names\":[],\"mappings\":\"AAIA,KACE,+BAAqC,CACtC,AACD,yBACE,KACE,kBAAuB,CACxB,CACF,AACD,mBACE,kCAAqC,CACtC,AACD,eACE,eAAgB,AAChB,cAAe,AACf,kBAAmB,AACnB,6BAA+B,CAChC,AACD,KACE,YAAa,AACb,cAAe,AACf,YAAa,AACb,yBAA0B,AAC1B,kCAAmC,AACnC,oBAAqB,AACrB,yCAA4C,AACpC,gCAAoC,CAC7C,AACD,eACE,kCAAqC,CACtC,AACD,gBACE,+BAAqC,CACtC,AACD,gHAKE,+BAAsC,CACvC,AAID,kDACE,qBAA2B,CAC5B,AACD,WACE,gBAAiB,AACjB,SAAU,AACV,cAAe,AACf,aAAc,AACd,mBAAoB,AACpB,iBAAkB,AAClB,UAAW,AACX,0BAA2B,AAC3B,yBAA0B,AAC1B,sBAAuB,AACvB,oBAAsB,CACvB,AAMD,qEAHE,+BAAiC,AACzB,sBAAyB,CAUlC,AARD,6BACE,YAAa,AACb,cAAe,AACf,yBAA0B,AAC1B,YAAa,AAGb,kBAAqB,CACtB,AACD,yBACE,aACE,yBAA8B,CAC/B,AACD,6BACE,WAAY,AACZ,kBAAqB,CACtB,AACD,0BACE,sBAAwB,AACxB,aAAc,AACd,uCAAyC,AACzC,wCAA0C,AAC1C,YAAc,CACf,AACD,uCACE,0BAA8B,AAC9B,uBAA2B,AAC3B,4BAA8B,AAC9B,uBAA0B,CAC3B,AACD,0CACE,0BAA8B,AAC9B,aAAgB,AAChB,oBAAuB,CACxB,AACD,wCACE,0BAA8B,AAC9B,aAAgB,AAChB,oBAAuB,CACxB,AACD,yCACE,0BAA8B,AAC9B,aAAgB,AAChB,oBAAuB,CACxB,AACD,6CACE,0BAA8B,AAC9B,aAAgB,AAChB,oBAAuB,CACxB,CACF,AACD,0BACE,YAAa,AACb,aAAc,AACd,wBAAyB,AACzB,8CAA+C,AAC/C,YAAc,CACf,AACD,0CACE,eAAmB,CACpB,AACD,uCACE,eAAmB,CACpB,AACD,wCACE,eAAmB,CACpB,AACD,yCACE,eAAmB,CACpB,AACD,6CACE,eAAmB,CACpB,AACD,uCACE,eAAgB,AAChB,gBAAkB,AAClB,gBAAiB,AACjB,gBAAiB,AACjB,eAAmB,CACpB,AACD,6BACE,SAAU,AACV,SAAW,CACZ,AACD,iBACE,YAAc,CACf,AACD,qCACE,cAAe,AACf,YAAa,AACb,gBAAkB,CACnB,AACD,iBACE,eAAgB,AAChB,eAAiB,CAClB\",\"file\":\"lesson-management.less\",\"sourcesContent\":[\"/* stylelint-disable at-rule-empty-line-before,at-rule-name-space-after,at-rule-no-unknown */\\n/* stylelint-disable no-duplicate-selectors */\\n/* stylelint-disable */\\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\\nbody {\\n  background-color: rgba(0, 0, 0, 0.5);\\n}\\n@media (max-width: 600px) {\\n  .cal {\\n    margin: 0px !important;\\n  }\\n}\\n.ant-card-bordered {\\n  background-color: #f8f8f8 !important;\\n}\\n.cal-container {\\n  padding-left: 0;\\n  padding-top: 0;\\n  overflow-y: scroll;\\n  height: -webkit-fill-available;\\n}\\n.cal {\\n  margin: 24px;\\n  margin-left: 0;\\n  padding: 8px;\\n  background-color: #f8f8f8;\\n  min-height: -webkit-fill-available;\\n  margin-bottom: 100px;\\n  -webkit-animation-duration: 0.3s !important;\\n          animation-duration: 0.3s !important;\\n}\\n.ant-menu-dark {\\n  background-color: #001529 !important;\\n}\\n.ant-menu-light {\\n  background-color: #ffffff !important;\\n}\\n.anticon-menu-fold,\\n.anticon-menu-unfold,\\n.anticon-bell,\\n.user-label-container .name-container .name,\\n.anticon-down {\\n  color: rgba(0, 0, 0, 0.65) !important;\\n}\\n.primary-text {\\n  color: rgba(0, 0, 0, 0.65);\\n}\\n.rc-color-picker-panel-params-input {\\n  color: rgba(0, 0, 0, 0.65);\\n}\\n.reset-btn {\\n  background: none;\\n  border: 0;\\n  color: inherit;\\n  font: inherit;\\n  line-height: normal;\\n  overflow: visible;\\n  padding: 0;\\n  -webkit-appearance: button;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n}\\n.ant-table-thead > tr,\\n.ant-table-tbody > tr {\\n  -webkit-animation-duration: 0.3s;\\n          animation-duration: 0.3s;\\n}\\n.lesson-management-container {\\n  margin: 24px;\\n  margin-left: 0;\\n  background-color: #f8f8f8;\\n  padding: 5px;\\n  -webkit-animation-duration: 0.3s;\\n          animation-duration: 0.3s;\\n  border-radius: 0.5em;\\n}\\n@media (max-width: 500px) {\\n  .summary-btn {\\n    grid-column: 1 / 3 !important;\\n  }\\n  .lesson-management-container {\\n    margin: 8px;\\n    border-radius: 0.5em;\\n  }\\n  .lesson-pickers-container {\\n    padding: 8px !important;\\n    display: grid;\\n    grid-template-rows: auto auto !important;\\n    grid-template-columns: 1fr 1fr !important;\\n    grid-gap: 8px;\\n  }\\n  .lesson-pickers-container .lesson-date {\\n    grid-column: 1 / 3 !important;\\n    grid-row: 4 / 4 !important;\\n    text-align: center !important;\\n    text-indent: 0 !important;\\n  }\\n  .lesson-pickers-container .add-lesson-btn {\\n    grid-column: 2 / 2 !important;\\n    grid-row: 2 / 2;\\n    width: auto !important;\\n  }\\n  .lesson-pickers-container .class-select {\\n    grid-column: 1 / 1 !important;\\n    grid-row: 1 / 1;\\n    width: auto !important;\\n  }\\n  .lesson-pickers-container .lesson-select {\\n    grid-column: 1 / 1 !important;\\n    grid-row: 2 / 2;\\n    width: auto !important;\\n  }\\n  .lesson-pickers-container .discipline-select {\\n    grid-column: 2 / 2 !important;\\n    grid-row: 1 / 1;\\n    width: auto !important;\\n  }\\n}\\n.lesson-pickers-container {\\n  padding: 5px;\\n  display: grid;\\n  grid-template-rows: auto;\\n  grid-template-columns: auto auto auto 1fr auto;\\n  grid-gap: 8px;\\n}\\n.lesson-pickers-container .add-lesson-btn {\\n  grid-column: 5 / 5;\\n}\\n.lesson-pickers-container .summary-btn {\\n  grid-column: 6 / 6;\\n}\\n.lesson-pickers-container .class-select {\\n  grid-column: 1 / 1;\\n}\\n.lesson-pickers-container .lesson-select {\\n  grid-column: 3 / 3;\\n}\\n.lesson-pickers-container .discipline-select {\\n  grid-column: 2 / 2;\\n}\\n.lesson-pickers-container .lesson-date {\\n  font-size: 15px;\\n  font-weight: bold;\\n  padding-top: 4px;\\n  text-indent: 8px;\\n  grid-column: 4 / 4;\\n}\\n.reset-btn::-moz-focus-inner {\\n  border: 0;\\n  padding: 0;\\n}\\n.reset-btn:focus {\\n  outline: none;\\n}\\n.ant-table-pagination.ant-pagination {\\n  margin: 16px 0;\\n  float: right;\\n  margin-right: 8px;\\n}\\nh3.summary-title {\\n  font-size: 20px;\\n  text-indent: 8px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/22.c364753d.chunk.js","import React, { Component } from \"react\";\r\nimport moment from \"moment\";\r\nimport {\r\n  Table,\r\n  Checkbox,\r\n  Button,\r\n  Avatar,\r\n  Modal,\r\n  Menu,\r\n  Dropdown,\r\n  Icon,\r\n  Select,\r\n  message,\r\n  Input\r\n} from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  sendCreateLesson,\r\n  sendGetLessons,\r\n  sendGetLessonsComplete,\r\n  sendAddLessonComplete,\r\n  sendGetAbsencesByLesson,\r\n  sendGetAbsencesByLessonComplete,\r\n  sendGetStudents,\r\n  sendGetStudentsComplete,\r\n  sendMarkAbsence,\r\n  sendUpdateSummary\r\n} from \"./../../../redux/actions/websocket\";\r\nimport { setUpdateSummary } from \"./../../../redux/actions/websocketActions/lesson\";\r\nimport \"./../../../styles/lesson-management.less\";\r\nimport { shallowEqual } from \"shouldcomponentupdate-children\";\r\nimport { isNull } from \"util\";\r\nimport {\r\n  requestNewLesson,\r\n  requestLessonSummaryUpdate,\r\n  requestClassLessons\r\n} from \"./../../../redux/actions/restActions/lesson\";\r\nimport {\r\n  requestTeacherDisciplines,\r\n  requestClassDisciplines\r\n} from \"./../../../redux/actions/restActions/discipline\";\r\nimport {\r\n  requestLessonAbsences,\r\n  requestMarkAbsence\r\n} from \"./../../../redux/actions/restActions/absence\";\r\n\r\nconst Option = Select.Option;\r\nconst { TextArea } = Input;\r\n\r\nvar materialId;\r\nvar lateId;\r\nvar disciplineId;\r\nvar presenceId;\r\n\r\nconst disciplinarAbsenceData = {\r\n  studentId: undefined,\r\n  checked: undefined\r\n};\r\n\r\nfunction canChangeAbsences(lessonDate) {\r\n  const currentDate = new Date();\r\n\r\n  const parts = lessonDate.split(\"-\");\r\n\r\n  const date = new Date();\r\n\r\n  parts[2] = parts[2].substring(0, 4);\r\n\r\n  date.setUTCDate(parts[0]);\r\n  date.setUTCMonth(parts[1] - 1);\r\n  date.setUTCFullYear(parts[2]);\r\n\r\n  if (moment(date).isSame(currentDate, \"day\")) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction getStudentAbsences(studentId, absences, selectedLesson) {\r\n  if (absences) {\r\n    var foundAbsences = [];\r\n\r\n    for (var i = 0; i < absences.length; i++) {\r\n      const tempAbsence = absences[i];\r\n\r\n      if (\r\n        tempAbsence.studentId === studentId &&\r\n        tempAbsence.lessonId === selectedLesson\r\n      ) {\r\n        foundAbsences.push(tempAbsence);\r\n      }\r\n\r\n      if (foundAbsences.length >= 5) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    return foundAbsences;\r\n  }\r\n}\r\n\r\nfunction generateRow(studentAbsences, student) {\r\n  var material = false;\r\n  var discipline = false;\r\n  var late = false;\r\n  var presence = false;\r\n\r\n  studentAbsences.forEach(absence => {\r\n    switch (absence.absenceType) {\r\n      case \"DISCIPLINAR\": {\r\n        discipline = true;\r\n        break;\r\n      }\r\n\r\n      case \"MATERIAL\": {\r\n        material = true;\r\n        break;\r\n      }\r\n\r\n      case \"PRESENCA\": {\r\n        presence = true;\r\n        break;\r\n      }\r\n\r\n      case \"ATRASO\": {\r\n        late = true;\r\n        break;\r\n      }\r\n\r\n      default:\r\n        break;\r\n    }\r\n  });\r\n\r\n  const newRow = {\r\n    key: student.studentId,\r\n    name: student.name,\r\n    face: student.photo ? student.photo : \"user\",\r\n    material: material,\r\n    presence: presence,\r\n    late: late,\r\n    discipline: discipline\r\n  };\r\n\r\n  const options = {\r\n    material: material,\r\n    presence: presence,\r\n    late: late,\r\n    discipline: discipline\r\n  };\r\n\r\n  const mobileRow = {\r\n    key: student.studentId,\r\n    name: student.name,\r\n    face: student.photo ? student.photo : \"user\",\r\n    options: options\r\n  };\r\n\r\n  return { newRow, mobileRow };\r\n}\r\n\r\nfunction getRowsV1(selectedClass, absences, selectedLesson) {\r\n  const data = [];\r\n  const mobileData = [];\r\n\r\n  for (var i = 0; i < selectedClass.students.length; i++) {\r\n    var studentAbsences = [];\r\n\r\n    if (absences) {\r\n      studentAbsences = getStudentAbsences(\r\n        selectedClass.students[i].studentId,\r\n        absences,\r\n        selectedLesson\r\n      );\r\n    }\r\n\r\n    const row = generateRow(studentAbsences, selectedClass.students[i]);\r\n\r\n    data.push(row.newRow);\r\n    mobileData.push(row.mobileRow);\r\n  }\r\n\r\n  return { data, mobileData };\r\n}\r\n\r\nfunction getClass(selectedClass, classes) {\r\n  for (var i = 0; i < classes.length; i++) {\r\n    if (classes[i].classId === selectedClass) {\r\n      return classes[i];\r\n    }\r\n  }\r\n}\r\n\r\nclass LessonMagement extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      mobileData: [],\r\n      previewImageURL: \"\",\r\n      previewVisible: false,\r\n      summaryVisible: false,\r\n      selectedClass: null,\r\n      selectedLesson: null,\r\n      selectedLessonDate: \"\",\r\n      canChangeAbsences: false,\r\n      selectedDiscipline: null,\r\n      addLessonLoading: false,\r\n      getLessonLoading: false,\r\n      getStudentsLoading: false,\r\n      getAbsencesLoading: false,\r\n      lessonChanged: true,\r\n      absenceExist: false,\r\n      idsSet: false,\r\n      summaryText: \"\",\r\n      disciplineModalVisible: false,\r\n      disciplineDescriptionText: \"\",\r\n      newLessonModalVisible: false\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return shallowEqual(this.props, nextProps, this.state, nextState);\r\n  }\r\n\r\n  markDisciplinarAbsenceConfirm = () => {\r\n    if (this.state.disciplineDescriptionText.trim() === \"\") {\r\n      message.error(\"É necessário uma descrição!\");\r\n    } else {\r\n      this.setState({\r\n        disciplineModalVisible: false,\r\n        disciplineDescriptionText: \"\"\r\n      });\r\n      this.markAbsence(\r\n        disciplineId,\r\n        disciplinarAbsenceData.studentId,\r\n        true,\r\n        disciplinarAbsenceData.checked,\r\n        this.state.disciplineDescriptionText\r\n      );\r\n    }\r\n  };\r\n\r\n  showAbsenceModal = () => {\r\n    this.setState({ disciplineModalVisible: true });\r\n  };\r\n\r\n  changeDisciplineDescription = e =>\r\n    this.setState({ disciplineDescriptionText: e.target.value });\r\n\r\n  changeSummary = e => this.setState({ summaryText: e.target.value });\r\n\r\n  showSummary = () => {\r\n    if (\r\n      this.state.selectedClass &&\r\n      this.state.selectedDiscipline &&\r\n      this.state.selectedLesson &&\r\n      this.props.teacherId\r\n    ) {\r\n      this.setState({ summaryVisible: true });\r\n    } else {\r\n      if (!this.state.selectedClass && !this.state.selectedDiscipline) {\r\n        message.error(\"Selecione uma turma, disciplina e lição\");\r\n      } else if (!this.state.selectedClass) {\r\n        message.error(\"Selecione uma turma\");\r\n      } else if (!this.state.selectedDiscipline) {\r\n        message.error(\"Selecione uma disciplina\");\r\n      } else if (!this.state.selectedLesson) {\r\n        message.error(\"Selecione uma lição\");\r\n      }\r\n    }\r\n  };\r\n\r\n  getStudentRow(rowKey) {\r\n    var mobileRow;\r\n    var row;\r\n\r\n    for (var i = 0; i < this.state.data.length; i++) {\r\n      if (this.state.data[i].key === rowKey) {\r\n        row = this.state.data[i];\r\n      }\r\n\r\n      if (this.state.mobileData[i].key === rowKey) {\r\n        mobileRow = this.state.mobileData[i];\r\n      }\r\n    }\r\n\r\n    return { row, mobileRow };\r\n  }\r\n\r\n  previewImage = e => {\r\n    const row = e.target.parentElement.id;\r\n\r\n    const image = this.state.data.find(function(element) {\r\n      if (element.key === row) {\r\n        return element;\r\n      }\r\n    });\r\n\r\n    this.setState({ previewImageURL: image.face, previewVisible: true });\r\n  };\r\n\r\n  cancelPreviewImage = e => {\r\n    if (this.state.summaryVisible) {\r\n      this.props.lessons.find(lesson => {\r\n        if (\r\n          lesson.lessonId === this.state.selectedLesson &&\r\n          this.state.summaryText !== lesson.summary\r\n        ) {\r\n          const updateSummary = {\r\n            lessonId: this.state.selectedLesson,\r\n            summary: this.state.summaryText\r\n          };\r\n\r\n          lesson.summary = this.state.summaryText;\r\n\r\n          this.props.requestLessonSummaryUpdate(updateSummary);\r\n          // this.props.setUpdateSummary(lesson);\r\n          message.success(\"Sumário atualizado!\");\r\n        }\r\n      });\r\n    }\r\n\r\n    this.setState({ previewVisible: false, summaryVisible: false });\r\n  };\r\n\r\n  triggerMissing = e => {\r\n    if (isNull(this.state.selectedDiscipline)) {\r\n      message.error(\"Selecione uma disciplina\");\r\n      return;\r\n    } else if (isNull(this.state.selectedLesson)) {\r\n      message.error(\"Selecione uma lição\");\r\n      return;\r\n    }\r\n\r\n    const rows = this.getStudentRow(parseInt(e.target.id));\r\n\r\n    if (rows.row.presence === true && !this.state.canChangeAbsences) {\r\n      message.error(\"Só pode remover faltas no proprio dia!\");\r\n    } else {\r\n      rows.row.presence = e.target.checked;\r\n\r\n      rows.mobileRow.options.presence = e.target.checked;\r\n\r\n      const newData = this.state.data;\r\n\r\n      const newMobileData = this.state.mobileData;\r\n\r\n      newData[e.target.id - 1] = rows.row;\r\n\r\n      newMobileData[e.target.id - 1] = rows.mobileRow;\r\n\r\n      this.markAbsence(\r\n        presenceId,\r\n        e.target.id,\r\n        true,\r\n        e.target.checked,\r\n        e.target.id\r\n      );\r\n\r\n      this.setState({ data: newData, mobileData: newMobileData });\r\n    }\r\n  };\r\n\r\n  triggerMaterial = e => {\r\n    if (isNull(this.state.selectedDiscipline)) {\r\n      message.error(\"Selecione uma disciplina\");\r\n      return;\r\n    } else if (isNull(this.state.selectedLesson)) {\r\n      message.error(\"Selecione uma lição\");\r\n      return;\r\n    }\r\n\r\n    const rows = this.getStudentRow(parseInt(e.target.id));\r\n\r\n    if (rows.row.material === true && !this.state.canChangeAbsences) {\r\n      message.error(\"Só pode remover faltas no proprio dia!\");\r\n    } else {\r\n      rows.row.material = e.target.checked;\r\n\r\n      rows.mobileRow.options.material = e.target.checked;\r\n\r\n      const newData = this.state.data;\r\n\r\n      const newMobileData = this.state.mobileData;\r\n\r\n      newData[e.target.id - 1] = rows.row;\r\n\r\n      newMobileData[e.target.id - 1] = rows.mobileRow;\r\n\r\n      this.markAbsence(materialId, e.target.id, false, e.target.checked);\r\n\r\n      this.setState({ data: newData, mobileData: newMobileData });\r\n    }\r\n  };\r\n\r\n  triggerLate = e => {\r\n    if (isNull(this.state.selectedDiscipline)) {\r\n      message.error(\"Selecione uma disciplina\");\r\n      return;\r\n    } else if (isNull(this.state.selectedLesson)) {\r\n      message.error(\"Selecione uma lição\");\r\n      return;\r\n    }\r\n\r\n    const rows = this.getStudentRow(parseInt(e.target.id));\r\n\r\n    if (rows.row.late === true && !this.state.canChangeAbsences) {\r\n      message.error(\"Só pode remover faltas no proprio dia!\");\r\n    } else {\r\n      rows.row.late = e.target.checked;\r\n\r\n      rows.mobileRow.options.late = e.target.checked;\r\n\r\n      const newData = this.state.data;\r\n\r\n      const newMobileData = this.state.mobileData;\r\n\r\n      newData[e.target.id - 1] = rows.row;\r\n\r\n      newMobileData[e.target.id - 1] = rows.mobileRow;\r\n\r\n      this.markAbsence(lateId, e.target.id, true, e.target.checked);\r\n\r\n      this.setState({ data: newData, mobileData: newMobileData });\r\n    }\r\n  };\r\n\r\n  triggerDiscipline = e => {\r\n    if (isNull(this.state.selectedDiscipline)) {\r\n      message.error(\"Selecione uma disciplina\");\r\n      return;\r\n    } else if (isNull(this.state.selectedLesson)) {\r\n      message.error(\"Selecione uma lição\");\r\n      return;\r\n    }\r\n\r\n    const rows = this.getStudentRow(parseInt(e.target.id));\r\n\r\n    if (rows.row.discipline) {\r\n      message.error(\"Não pode remover faltas disciplinares!\");\r\n    } else {\r\n      rows.row.discipline = e.target.checked;\r\n\r\n      rows.mobileRow.options.discipline = e.target.checked;\r\n\r\n      const newData = this.state.data;\r\n\r\n      const newMobileData = this.state.mobileData;\r\n\r\n      newData[e.target.id - 1] = rows.row;\r\n\r\n      newMobileData[e.target.id - 1] = rows.mobileRow;\r\n\r\n      if (e.target.checked) {\r\n        this.showAbsenceModal();\r\n        disciplinarAbsenceData.studentId = e.target.id;\r\n        disciplinarAbsenceData.checked = e.target.checked;\r\n      } else {\r\n        this.markAbsence(disciplineId, e.target.id, true, e.target.checked);\r\n      }\r\n\r\n      this.setState({ data: newData, mobileData: newMobileData });\r\n    }\r\n  };\r\n\r\n  markAbsence = (\r\n    absenceTypeId,\r\n    studentId,\r\n    justificable,\r\n    create,\r\n    description = \"\",\r\n    absenceId\r\n  ) => {\r\n    const absence = {\r\n      studentId: studentId,\r\n      disciplineId: this.state.selectedDiscipline,\r\n      lessonId: this.state.selectedLesson,\r\n      justificable: justificable,\r\n      absenceType: absenceTypeId,\r\n      create: create,\r\n      description: description,\r\n      absenceId: absenceId\r\n    };\r\n\r\n    this.props.requestMarkAbsence(absence);\r\n  };\r\n\r\n  handleLessonChange = value => {\r\n    this.setState({ selectedLesson: value }, () => {\r\n      this.props.lessons.find(lesson => {\r\n        if (lesson.lessonId === this.state.selectedLesson) {\r\n          const canChangeLesson = canChangeAbsences(lesson.date);\r\n\r\n          this.setState({\r\n            summaryText: lesson.summary,\r\n            selectedLessonDate: lesson.date\r\n              .slice(0, 10)\r\n              .replace(\"-\", \"/\")\r\n              .replace(\"-\", \"/\"),\r\n            canChangeAbsences: canChangeLesson\r\n          });\r\n        }\r\n      });\r\n\r\n      if (this.props.absences) {\r\n        var found = false;\r\n\r\n        for (var i = 0; i < this.props.absences.length; i++) {\r\n          const tempAbsence = this.props.absences[i];\r\n\r\n          if (tempAbsence.lessonId === this.state.selectedLesson) {\r\n            found = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!found) {\r\n          this.getAbsences();\r\n        } else {\r\n          this.props.sendGetAbsencesByLessonComplete();\r\n          this.setState(\r\n            {\r\n              getAbsencesLoading: true,\r\n              lessonChanged: true,\r\n              absenceExist: true\r\n            },\r\n            () => {}\r\n          );\r\n        }\r\n      } else {\r\n        this.getAbsences();\r\n      }\r\n    });\r\n  };\r\n\r\n  handleClassChange = value => {\r\n    this.setState(\r\n      { selectedClass: value, selectedDiscipline: null, selectedLesson: null },\r\n      () => {\r\n        this.setState({ getStudentsLoading: false });\r\n        this.props.sendGetStudentsComplete();\r\n      }\r\n    );\r\n  };\r\n\r\n  handleDisciplineChange = value => {\r\n    this.setState({ selectedDiscipline: value, selectedLesson: null }, () => {\r\n      if (this.props.lessons) {\r\n        var found = false;\r\n\r\n        for (var i = 0; i < this.props.lessons.length; i++) {\r\n          const tempLesson = this.props.lessons[i];\r\n\r\n          if (\r\n            tempLesson.disciplineId === this.state.selectedDiscipline &&\r\n            tempLesson.classId === this.state.selectedClass\r\n          ) {\r\n            found = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!found) {\r\n          this.getLessons();\r\n        } else {\r\n          this.setState({ getLessonLoading: false, lessonChanged: true });\r\n          this.props.sendGetLessonsComplete();\r\n        }\r\n      } else {\r\n        this.getLessons();\r\n      }\r\n    });\r\n  };\r\n\r\n  createNewLesson = () => {\r\n    if (\r\n      this.state.selectedClass &&\r\n      this.state.selectedDiscipline &&\r\n      this.props.teacherId\r\n    ) {\r\n      this.setState({ addLessonLoading: true }, () => {\r\n        const newLesson = {\r\n          disciplineId: this.state.selectedDiscipline,\r\n          classId: this.state.selectedClass,\r\n          teacherId: this.props.teacherId\r\n        };\r\n\r\n        this.props.requestNewLesson(newLesson).then(Response => {\r\n          if (Response.status) {\r\n            this.setState({ addLessonLoading: false }, () => {\r\n              message.error(\r\n                \"Não é possível criar mais lições para esta disciplina!\"\r\n              );\r\n            });\r\n          }\r\n        });\r\n      });\r\n    } else {\r\n      if (!this.state.selectedClass && !this.state.selectedDiscipline) {\r\n        message.error(\"Selecione uma turma e disciplina\");\r\n      } else if (!this.state.selectedClass) {\r\n        message.error(\"Selecione uma turma\");\r\n      } else if (!this.state.selectedDiscipline) {\r\n        message.error(\"Selecione uma disciplina\");\r\n      }\r\n    }\r\n  };\r\n\r\n  getLessons = () => {\r\n    this.setState({ getLessonLoading: true, lessonChanged: true }, () => {\r\n      this.props.requestClassLessons(\r\n        this.state.selectedClass,\r\n        this.state.selectedDiscipline\r\n      );\r\n    });\r\n  };\r\n\r\n  getStudents = () => {\r\n    this.setState({ getStudentsLoading: true }, () => {\r\n      const getStudents = {\r\n        classId: this.state.selectedClass\r\n      };\r\n\r\n      this.props.sendGetStudents(getStudents);\r\n    });\r\n  };\r\n\r\n  getAbsences = () => {\r\n    this.props.requestLessonAbsences(this.state.selectedLesson);\r\n    this.setState({ getAbsencesLoading: true, lessonChanged: true }, () => {});\r\n  };\r\n\r\n  componentWillUpdate(nextProps, nextState) {\r\n    if (!nextProps.teacherDisciplines) {\r\n      this.props.requestTeacherDisciplines();\r\n    }\r\n\r\n    if (nextProps.classes) {\r\n      const selectedClass = getClass(\r\n        nextState.selectedClass,\r\n        nextProps.classes\r\n      );\r\n\r\n      if (selectedClass) {\r\n        const rows = getRowsV1(\r\n          selectedClass,\r\n          nextProps.absences,\r\n          nextState.selectedLesson\r\n        );\r\n\r\n        nextState.lessonChanged = false;\r\n        nextState.getAbsencesLoading = false;\r\n        nextState.data = rows.data;\r\n        nextState.mobileData = rows.mobileData;\r\n        nextState.absenceExist = false;\r\n\r\n        this.props.sendGetAbsencesByLessonComplete();\r\n      }\r\n    }\r\n\r\n    if (!this.state.idsSet && nextProps.absenceTypes) {\r\n      for (var i = 0; i < nextProps.absenceTypes.length; i++) {\r\n        if (nextProps.absenceTypes[i].name === \"DISCIPLINAR\") {\r\n          disciplineId = nextProps.absenceTypes[i].absenceTypeId;\r\n        }\r\n\r\n        if (nextProps.absenceTypes[i].name === \"MATERIAL\") {\r\n          materialId = nextProps.absenceTypes[i].absenceTypeId;\r\n        }\r\n\r\n        if (nextProps.absenceTypes[i].name === \"PRESENCA\") {\r\n          presenceId = nextProps.absenceTypes[i].absenceTypeId;\r\n        }\r\n\r\n        if (nextProps.absenceTypes[i].name === \"ATRASO\") {\r\n          lateId = nextProps.absenceTypes[i].absenceTypeId;\r\n        }\r\n      }\r\n\r\n      nextState.idsSet = true;\r\n    }\r\n\r\n    if (this.state.addLessonLoading) {\r\n      if (nextProps.addSuccess === true) {\r\n        var lastestLesson = 0;\r\n        var lastestLessonId = 0;\r\n\r\n        for (var i = 0; i < this.props.lessons.length; i++) {\r\n          var tempLesson = this.props.lessons[i];\r\n\r\n          if (\r\n            tempLesson.disciplineId === this.state.selectedDiscipline &&\r\n            tempLesson.classId === this.state.selectedClass &&\r\n            tempLesson.lessonNumber > lastestLesson\r\n          ) {\r\n            lastestLesson = tempLesson.lessonNumber;\r\n            lastestLessonId = tempLesson.lessonId;\r\n          }\r\n        }\r\n\r\n        const currentDate = new Date();\r\n\r\n        const dateString =\r\n          currentDate.getDate() +\r\n          \"/\" +\r\n          (currentDate.getMonth() + 1) +\r\n          \"/\" +\r\n          currentDate.getFullYear();\r\n\r\n        nextState.addLessonLoading = false;\r\n        nextState.selectedLesson = lastestLessonId;\r\n        nextState.selectedLessonDate = dateString;\r\n        this.props.sendAddLessonComplete();\r\n        this.handleLessonChange(lastestLessonId);\r\n        message.success(\"Nova lição criada!\");\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.state.getLessonLoading) {\r\n      if (nextProps.getSuccess === true) {\r\n        this.setState({ getLessonLoading: false }, () => {\r\n          this.props.sendGetLessonsComplete();\r\n        });\r\n      }\r\n    }\r\n\r\n    if (this.state.getStudentsLoading) {\r\n      if (nextProps.getStudents === true) {\r\n        this.setState({ getStudentsLoading: false }, () => {\r\n          this.props.sendGetStudentsComplete();\r\n        });\r\n      }\r\n    }\r\n\r\n    if (this.state.lessonChanged) {\r\n      if (nextProps.getAbsences === true) {\r\n        this.setState(\r\n          { getAbsencesLoading: false, lessonChanged: false },\r\n          () => {\r\n            this.props.sendGetAbsencesByLessonComplete();\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const mobileColumns = [\r\n      {\r\n        title: \"Foto\",\r\n        dataIndex: \"face\",\r\n        key: \"face\",\r\n        width: \"20%\",\r\n        render: (text, row, index) => {\r\n          const isPhoto = text !== \"user\";\r\n\r\n          return (\r\n            <button className=\"reset-btn\" id={row.key}>\r\n              {isPhoto ? (\r\n                <Avatar id={row.key} className=\"icon\" size=\"user\" src={text} />\r\n              ) : (\r\n                <Avatar id={row.key} className=\"icon\" size=\"user\" icon=\"user\" />\r\n              )}\r\n            </button>\r\n          );\r\n        }\r\n      },\r\n      ,\r\n      {\r\n        title: \"Nome\",\r\n        dataIndex: \"name\",\r\n        key: \"name\",\r\n        width: \"35%\",\r\n        render: text => <a href=\"javascript:;\">{text}</a>\r\n      },\r\n      {\r\n        title: \"Opções\",\r\n        dataIndex: \"options\",\r\n        key: \"options\",\r\n        width: \"45%\",\r\n        render: (text, row, index) => {\r\n          var material = false;\r\n          var presence = false;\r\n          var late = false;\r\n          var discipline = false;\r\n\r\n          if (text) {\r\n            material = text.material;\r\n            presence = text.presence;\r\n            late = text.late;\r\n            discipline = text.discipline;\r\n          }\r\n\r\n          const menu = (\r\n            <Menu>\r\n              <Menu.Item key=\"0\">\r\n                <Checkbox\r\n                  checked={material}\r\n                  onChange={this.triggerMaterial}\r\n                  id={row.key}\r\n                >\r\n                  Falta de Material\r\n                </Checkbox>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"1\">\r\n                <Checkbox\r\n                  checked={presence}\r\n                  onChange={this.triggerMissing}\r\n                  id={row.key}\r\n                >\r\n                  Falta de Presenca\r\n                </Checkbox>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"3\">\r\n                <Checkbox\r\n                  checked={late}\r\n                  onChange={this.triggerLate}\r\n                  id={row.key}\r\n                >\r\n                  Falta de Atraso\r\n                </Checkbox>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"4\">\r\n                <Checkbox\r\n                  checked={discipline}\r\n                  onChange={this.triggerDiscipline}\r\n                  id={row.key}\r\n                >\r\n                  Falta Disciplinar\r\n                </Checkbox>\r\n              </Menu.Item>\r\n            </Menu>\r\n          );\r\n\r\n          return (\r\n            <Dropdown overlay={menu} trigger={[\"click\"]}>\r\n              <a className=\"ant-dropdown-link\" href=\"#\">\r\n                Opções <Icon type=\"down\" />\r\n              </a>\r\n            </Dropdown>\r\n          );\r\n        }\r\n      }\r\n    ];\r\n\r\n    const columns = [\r\n      {\r\n        title: \"Foto\",\r\n        dataIndex: \"face\",\r\n        key: \"face\",\r\n        width: \"15%\",\r\n        render: (text, row, index) => {\r\n          const isPhoto = text !== \"user\";\r\n\r\n          return (\r\n            <button className=\"reset-btn\" id={row.key}>\r\n              {isPhoto ? (\r\n                <Avatar id={row.key} className=\"icon\" size=\"user\" src={text} />\r\n              ) : (\r\n                <Avatar id={row.key} className=\"icon\" size=\"user\" icon=\"user\" />\r\n              )}\r\n            </button>\r\n          );\r\n        }\r\n      },\r\n      {\r\n        title: \"Nome\",\r\n        dataIndex: \"name\",\r\n        key: \"name\",\r\n        width: \"20%\",\r\n        render: text => <a href=\"javascript:;\">{text}</a>\r\n      },\r\n      {\r\n        title: \"Falta de Material\",\r\n        dataIndex: \"material\",\r\n        key: \"material\",\r\n        width: \"15%\",\r\n        render: (text, row, index) => {\r\n          return (\r\n            <Checkbox\r\n              className={row.key}\r\n              id={row.key.toString()}\r\n              onChange={this.triggerMaterial}\r\n              checked={text}\r\n            />\r\n          );\r\n        }\r\n      },\r\n      {\r\n        title: \"Falta de Presença\",\r\n        dataIndex: \"presence\",\r\n        key: \"presence\",\r\n        width: \"15%\",\r\n        render: (text, row, index) => {\r\n          return (\r\n            <Checkbox\r\n              className={row.key}\r\n              id={row.key.toString()}\r\n              onChange={this.triggerMissing}\r\n              checked={text}\r\n            />\r\n          );\r\n        }\r\n      },\r\n      {\r\n        title: \"Falta de Atraso\",\r\n        dataIndex: \"late\",\r\n        key: \"late\",\r\n        width: \"15%\",\r\n        render: (text, row, index) => {\r\n          return (\r\n            <Checkbox\r\n              className={row.key}\r\n              id={row.key.toString()}\r\n              onChange={this.triggerLate}\r\n              checked={text}\r\n            />\r\n          );\r\n        }\r\n      },\r\n      {\r\n        title: \"Falta Disciplinar\",\r\n        dataIndex: \"discipline\",\r\n        key: \"discipline\",\r\n        width: \"20%\",\r\n        render: (text, row, index) => {\r\n          return (\r\n            <Checkbox\r\n              className={row.key}\r\n              id={row.key.toString()}\r\n              onChange={this.triggerDiscipline}\r\n              checked={text}\r\n            />\r\n          );\r\n        }\r\n      }\r\n    ];\r\n\r\n    var avaibleClasses;\r\n    var avaibleDisciplines;\r\n    var avaibleLessons;\r\n\r\n    if (this.props.classes) {\r\n      avaibleClasses = this.props.classes.map(item => {\r\n        return (\r\n          <Option key={item.classId} value={item.classId}>\r\n            {item.name}\r\n          </Option>\r\n        );\r\n      });\r\n    }\r\n\r\n    if (this.props.teacherDisciplines) {\r\n      avaibleDisciplines = this.props.teacherDisciplines.map(item => {\r\n        return (\r\n          <Option key={item.disciplineId} value={item.disciplineId}>\r\n            {item.abbreviation}\r\n          </Option>\r\n        );\r\n      });\r\n    }\r\n\r\n    if (this.props.lessons) {\r\n      avaibleLessons = this.props.lessons.map(item => {\r\n        if (\r\n          item.disciplineId === this.state.selectedDiscipline &&\r\n          item.classId === this.state.selectedClass\r\n        ) {\r\n          return (\r\n            <Option key={item.lessonId} value={item.lessonId}>\r\n              {item.lessonNumber}\r\n            </Option>\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    return (\r\n      <div className=\"lesson-management-container animated slideInUp\">\r\n        <div className=\"lesson-pickers-container\">\r\n          {window.innerWidth > 500 ? (\r\n            <label style={{ gridRow: \"1\", gridColumn: \"1\" }}>Turma:</label>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Select\r\n            className=\"class-select\"\r\n            style={{ width: 120 }}\r\n            placeholder=\"Turma\"\r\n            onChange={this.handleClassChange}\r\n          >\r\n            {avaibleClasses}\r\n          </Select>\r\n          {window.innerWidth > 500 ? (\r\n            <label style={{ gridRow: \"1\", gridColumn: \"2\" }}>Disciplina:</label>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Select\r\n            value={\r\n              this.state.selectedDiscipline\r\n                ? this.state.selectedDiscipline\r\n                : undefined\r\n            }\r\n            disabled={this.state.selectedClass ? false : true}\r\n            className=\"discipline-select\"\r\n            style={{ width: 120 }}\r\n            placeholder={\r\n              this.state.getStudentsLoading ? (\r\n                <Icon type=\"loading\" theme=\"outlined\" />\r\n              ) : (\r\n                \"Disciplina\"\r\n              )\r\n            }\r\n            onChange={this.handleDisciplineChange}\r\n          >\r\n            {avaibleDisciplines}\r\n          </Select>\r\n          {window.innerWidth > 500 ? (\r\n            <label style={{ gridRow: \"1\", gridColumn: \"3\" }}>Lição:</label>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Select\r\n            value={\r\n              this.state.selectedLesson ? this.state.selectedLesson : undefined\r\n            }\r\n            disabled={this.state.selectedDiscipline ? false : true}\r\n            className=\"lesson-select\"\r\n            style={{ width: 120 }}\r\n            placeholder={\r\n              this.state.getLessonLoading ? (\r\n                <Icon type=\"loading\" theme=\"outlined\" />\r\n              ) : (\r\n                \"N.º Lição\"\r\n              )\r\n            }\r\n            onChange={this.handleLessonChange}\r\n          >\r\n            {avaibleLessons}\r\n          </Select>\r\n          <span className=\"lesson-date\">{this.state.selectedLessonDate}</span>\r\n          <Button\r\n            loading={this.state.addLessonLoading}\r\n            onClick={this.createNewLesson}\r\n            className=\"add-lesson-btn\"\r\n            type=\"primary\"\r\n          >\r\n            Nova Lição\r\n          </Button>\r\n          <Button\r\n            className=\"summary-btn\"\r\n            onClick={this.showSummary}\r\n            type=\"primary\"\r\n          >\r\n            Sumário\r\n          </Button>\r\n        </div>\r\n        <Table\r\n          rowClassName=\"animated slideInRight\"\r\n          loading={this.state.getLessonLoading || this.state.getAbsencesLoading}\r\n          style={{\r\n            marginLeft: \"5px\",\r\n            marginRight: \"5px\"\r\n          }}\r\n          columns={window.innerWidth > 600 ? columns : mobileColumns}\r\n          dataSource={\r\n            window.innerWidth > 600 ? this.state.data : this.state.mobileData\r\n          }\r\n        />\r\n        <Modal\r\n          visible={this.state.previewVisible || this.state.summaryVisible}\r\n          footer={null}\r\n          onCancel={this.cancelPreviewImage}\r\n        >\r\n          {this.state.previewVisible ? (\r\n            <img\r\n              style={{ width: \"100%\", padding: \"15px\" }}\r\n              src={this.state.previewImageURL}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          {this.state.summaryVisible ? (\r\n            <div className=\"sumary-container\">\r\n              <h3 className=\"summary-title\">Sumário:</h3>\r\n              <TextArea\r\n                value={this.state.summaryText}\r\n                onChange={this.changeSummary}\r\n                rows={8}\r\n              />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal>\r\n        <Modal\r\n          visible={this.state.disciplineModalVisible}\r\n          onCancel={() => this.setState({ disciplineModalVisible: false })}\r\n          footer={[\r\n            <Button\r\n              key=\"back\"\r\n              onClick={() => this.setState({ disciplineModalVisible: false })}\r\n            >\r\n              Cancelar\r\n            </Button>,\r\n            <Button\r\n              key=\"submit\"\r\n              type=\"danger\"\r\n              onClick={this.markDisciplinarAbsenceConfirm}\r\n            >\r\n              Marcar\r\n            </Button>\r\n          ]}\r\n        >\r\n          <div style={{ marginTop: \"20px\" }}>\r\n            <h3 className=\"summary-title\">Descrição:</h3>\r\n            <TextArea\r\n              value={this.state.disciplineDescriptionText}\r\n              onChange={this.changeDisciplineDescription}\r\n              rows={8}\r\n            />\r\n          </div>\r\n        </Modal>\r\n        <Modal\r\n          visible={this.state.newLessonModalVisible}\r\n          onCancel={() => this.setState({ newLessonModalVisible: false })}\r\n          footer={[\r\n            <Button\r\n              key=\"back\"\r\n              onClick={() =>\r\n                this.setState({\r\n                  newLessonModalVisible: false,\r\n                  addLessonLoading: false\r\n                })\r\n              }\r\n            >\r\n              Cancelar\r\n            </Button>,\r\n            <Button\r\n              key=\"submit\"\r\n              type=\"primary\"\r\n              onClick={this.markDisciplinarAbsenceConfirm}\r\n            >\r\n              Criar Lição\r\n            </Button>\r\n          ]}\r\n        >\r\n          <div style={{ marginTop: \"20px\" }}>\r\n            <h3>Turma: {this.state.selectedClass}</h3>\r\n            <h3>Nº Licao: {this.state.selectedLesson}</h3>\r\n            <h3>Disciplina: {this.state.selectedDiscipline}</h3>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  sendGetLessons,\r\n  sendCreateLesson,\r\n  sendGetLessonsComplete,\r\n  sendAddLessonComplete,\r\n  sendGetAbsencesByLesson,\r\n  sendGetStudentsComplete,\r\n  sendGetStudents,\r\n  sendGetAbsencesByLessonComplete,\r\n  sendMarkAbsence,\r\n  sendUpdateSummary,\r\n  setUpdateSummary,\r\n  requestNewLesson,\r\n  requestLessonSummaryUpdate,\r\n  requestClassLessons,\r\n  requestTeacherDisciplines,\r\n  requestLessonAbsences,\r\n  requestMarkAbsence\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    classes: state.classes.classes,\r\n    teacherId: state.authentication.userRoleId,\r\n    teacherDisciplines: state.disciplines.teacherDisciplines,\r\n    lessons: state.lessons.lessons,\r\n    getSuccess: state.lessons.getSuccess,\r\n    addSuccess: state.lessons.addSuccess,\r\n    absences: state.absences.absences,\r\n    getStudents: state.students.getStudents,\r\n    students: state.students.students,\r\n    getAbsences: state.absences.getAbsences,\r\n    absenceTypes: state.absences.absenceTypes\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(LessonMagement);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/containers/Teacher/LessonManagement/lesson-management.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--1-oneOf-0-2!../../node_modules/postcss-loader/lib/index.js??postcss!../../node_modules/less-loader/dist/cjs.js??ref--1-oneOf-0-4!./lesson-management.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/lesson-management.less\n// module id = 1289\n// module chunks = 22","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"body{background-color:rgba(0,0,0,.5)}@media (max-width:600px){.cal{margin:0!important}}.ant-card-bordered{background-color:#f8f8f8!important}.cal-container{padding-left:0;padding-top:0;overflow-y:scroll;height:-webkit-fill-available}.cal{margin:24px;margin-left:0;padding:8px;background-color:#f8f8f8;min-height:-webkit-fill-available;margin-bottom:100px;-webkit-animation-duration:.3s!important;animation-duration:.3s!important}.ant-menu-dark{background-color:#001529!important}.ant-menu-light{background-color:#fff!important}.anticon-bell,.anticon-down,.anticon-menu-fold,.anticon-menu-unfold,.user-label-container .name-container .name{color:rgba(0,0,0,.65)!important}.primary-text,.rc-color-picker-panel-params-input{color:rgba(0,0,0,.65)}.reset-btn{background:none;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-appearance:button;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.ant-table-tbody>tr,.ant-table-thead>tr,.lesson-management-container{-webkit-animation-duration:.3s;animation-duration:.3s}.lesson-management-container{margin:24px;margin-left:0;background-color:#f8f8f8;padding:5px;border-radius:.5em}@media (max-width:500px){.summary-btn{grid-column:1/3!important}.lesson-management-container{margin:8px;border-radius:.5em}.lesson-pickers-container{padding:8px!important;display:grid;grid-template-rows:auto auto!important;grid-template-columns:1fr 1fr!important;grid-gap:8px}.lesson-pickers-container .lesson-date{grid-column:1/3!important;grid-row:4/4!important;text-align:center!important;text-indent:0!important}.lesson-pickers-container .add-lesson-btn{grid-column:2/2!important;grid-row:2/2;width:auto!important}.lesson-pickers-container .class-select{grid-column:1/1!important;grid-row:1/1;width:auto!important}.lesson-pickers-container .lesson-select{grid-column:1/1!important;grid-row:2/2;width:auto!important}.lesson-pickers-container .discipline-select{grid-column:2/2!important;grid-row:1/1;width:auto!important}}.lesson-pickers-container{padding:5px;display:grid;grid-template-rows:auto;grid-template-columns:auto auto auto 1fr auto;grid-gap:8px}.lesson-pickers-container .add-lesson-btn{grid-column:5/5}.lesson-pickers-container .summary-btn{grid-column:6/6}.lesson-pickers-container .class-select{grid-column:1/1}.lesson-pickers-container .lesson-select{grid-column:3/3}.lesson-pickers-container .discipline-select{grid-column:2/2}.lesson-pickers-container .lesson-date{font-size:15px;font-weight:700;padding-top:4px;text-indent:8px;grid-column:4/4}.reset-btn::-moz-focus-inner{border:0;padding:0}.reset-btn:focus{outline:none}.ant-table-pagination.ant-pagination{margin:16px 0;float:right;margin-right:8px}h3.summary-title{font-size:20px;text-indent:8px}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/Lisomatrix/Desktop/NEW_PAP/bac/Frontend/src/styles/lesson-management.less\"],\"names\":[],\"mappings\":\"AAIA,KACE,+BAAqC,CACtC,AACD,yBACE,KACE,kBAAuB,CACxB,CACF,AACD,mBACE,kCAAqC,CACtC,AACD,eACE,eAAgB,AAChB,cAAe,AACf,kBAAmB,AACnB,6BAA+B,CAChC,AACD,KACE,YAAa,AACb,cAAe,AACf,YAAa,AACb,yBAA0B,AAC1B,kCAAmC,AACnC,oBAAqB,AACrB,yCAA4C,AACpC,gCAAoC,CAC7C,AACD,eACE,kCAAqC,CACtC,AACD,gBACE,+BAAqC,CACtC,AACD,gHAKE,+BAAsC,CACvC,AAID,kDACE,qBAA2B,CAC5B,AACD,WACE,gBAAiB,AACjB,SAAU,AACV,cAAe,AACf,aAAc,AACd,mBAAoB,AACpB,iBAAkB,AAClB,UAAW,AACX,0BAA2B,AAC3B,yBAA0B,AAC1B,sBAAuB,AACvB,oBAAsB,CACvB,AAMD,qEAHE,+BAAiC,AACzB,sBAAyB,CAUlC,AARD,6BACE,YAAa,AACb,cAAe,AACf,yBAA0B,AAC1B,YAAa,AAGb,kBAAqB,CACtB,AACD,yBACE,aACE,yBAA8B,CAC/B,AACD,6BACE,WAAY,AACZ,kBAAqB,CACtB,AACD,0BACE,sBAAwB,AACxB,aAAc,AACd,uCAAyC,AACzC,wCAA0C,AAC1C,YAAc,CACf,AACD,uCACE,0BAA8B,AAC9B,uBAA2B,AAC3B,4BAA8B,AAC9B,uBAA0B,CAC3B,AACD,0CACE,0BAA8B,AAC9B,aAAgB,AAChB,oBAAuB,CACxB,AACD,wCACE,0BAA8B,AAC9B,aAAgB,AAChB,oBAAuB,CACxB,AACD,yCACE,0BAA8B,AAC9B,aAAgB,AAChB,oBAAuB,CACxB,AACD,6CACE,0BAA8B,AAC9B,aAAgB,AAChB,oBAAuB,CACxB,CACF,AACD,0BACE,YAAa,AACb,aAAc,AACd,wBAAyB,AACzB,8CAA+C,AAC/C,YAAc,CACf,AACD,0CACE,eAAmB,CACpB,AACD,uCACE,eAAmB,CACpB,AACD,wCACE,eAAmB,CACpB,AACD,yCACE,eAAmB,CACpB,AACD,6CACE,eAAmB,CACpB,AACD,uCACE,eAAgB,AAChB,gBAAkB,AAClB,gBAAiB,AACjB,gBAAiB,AACjB,eAAmB,CACpB,AACD,6BACE,SAAU,AACV,SAAW,CACZ,AACD,iBACE,YAAc,CACf,AACD,qCACE,cAAe,AACf,YAAa,AACb,gBAAkB,CACnB,AACD,iBACE,eAAgB,AAChB,eAAiB,CAClB\",\"file\":\"lesson-management.less\",\"sourcesContent\":[\"/* stylelint-disable at-rule-empty-line-before,at-rule-name-space-after,at-rule-no-unknown */\\n/* stylelint-disable no-duplicate-selectors */\\n/* stylelint-disable */\\n/* stylelint-disable declaration-bang-space-before,no-duplicate-selectors,string-no-newline */\\nbody {\\n  background-color: rgba(0, 0, 0, 0.5);\\n}\\n@media (max-width: 600px) {\\n  .cal {\\n    margin: 0px !important;\\n  }\\n}\\n.ant-card-bordered {\\n  background-color: #f8f8f8 !important;\\n}\\n.cal-container {\\n  padding-left: 0;\\n  padding-top: 0;\\n  overflow-y: scroll;\\n  height: -webkit-fill-available;\\n}\\n.cal {\\n  margin: 24px;\\n  margin-left: 0;\\n  padding: 8px;\\n  background-color: #f8f8f8;\\n  min-height: -webkit-fill-available;\\n  margin-bottom: 100px;\\n  -webkit-animation-duration: 0.3s !important;\\n          animation-duration: 0.3s !important;\\n}\\n.ant-menu-dark {\\n  background-color: #001529 !important;\\n}\\n.ant-menu-light {\\n  background-color: #ffffff !important;\\n}\\n.anticon-menu-fold,\\n.anticon-menu-unfold,\\n.anticon-bell,\\n.user-label-container .name-container .name,\\n.anticon-down {\\n  color: rgba(0, 0, 0, 0.65) !important;\\n}\\n.primary-text {\\n  color: rgba(0, 0, 0, 0.65);\\n}\\n.rc-color-picker-panel-params-input {\\n  color: rgba(0, 0, 0, 0.65);\\n}\\n.reset-btn {\\n  background: none;\\n  border: 0;\\n  color: inherit;\\n  font: inherit;\\n  line-height: normal;\\n  overflow: visible;\\n  padding: 0;\\n  -webkit-appearance: button;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n}\\n.ant-table-thead > tr,\\n.ant-table-tbody > tr {\\n  -webkit-animation-duration: 0.3s;\\n          animation-duration: 0.3s;\\n}\\n.lesson-management-container {\\n  margin: 24px;\\n  margin-left: 0;\\n  background-color: #f8f8f8;\\n  padding: 5px;\\n  -webkit-animation-duration: 0.3s;\\n          animation-duration: 0.3s;\\n  border-radius: 0.5em;\\n}\\n@media (max-width: 500px) {\\n  .summary-btn {\\n    grid-column: 1 / 3 !important;\\n  }\\n  .lesson-management-container {\\n    margin: 8px;\\n    border-radius: 0.5em;\\n  }\\n  .lesson-pickers-container {\\n    padding: 8px !important;\\n    display: grid;\\n    grid-template-rows: auto auto !important;\\n    grid-template-columns: 1fr 1fr !important;\\n    grid-gap: 8px;\\n  }\\n  .lesson-pickers-container .lesson-date {\\n    grid-column: 1 / 3 !important;\\n    grid-row: 4 / 4 !important;\\n    text-align: center !important;\\n    text-indent: 0 !important;\\n  }\\n  .lesson-pickers-container .add-lesson-btn {\\n    grid-column: 2 / 2 !important;\\n    grid-row: 2 / 2;\\n    width: auto !important;\\n  }\\n  .lesson-pickers-container .class-select {\\n    grid-column: 1 / 1 !important;\\n    grid-row: 1 / 1;\\n    width: auto !important;\\n  }\\n  .lesson-pickers-container .lesson-select {\\n    grid-column: 1 / 1 !important;\\n    grid-row: 2 / 2;\\n    width: auto !important;\\n  }\\n  .lesson-pickers-container .discipline-select {\\n    grid-column: 2 / 2 !important;\\n    grid-row: 1 / 1;\\n    width: auto !important;\\n  }\\n}\\n.lesson-pickers-container {\\n  padding: 5px;\\n  display: grid;\\n  grid-template-rows: auto;\\n  grid-template-columns: auto auto auto 1fr auto;\\n  grid-gap: 8px;\\n}\\n.lesson-pickers-container .add-lesson-btn {\\n  grid-column: 5 / 5;\\n}\\n.lesson-pickers-container .summary-btn {\\n  grid-column: 6 / 6;\\n}\\n.lesson-pickers-container .class-select {\\n  grid-column: 1 / 1;\\n}\\n.lesson-pickers-container .lesson-select {\\n  grid-column: 3 / 3;\\n}\\n.lesson-pickers-container .discipline-select {\\n  grid-column: 2 / 2;\\n}\\n.lesson-pickers-container .lesson-date {\\n  font-size: 15px;\\n  font-weight: bold;\\n  padding-top: 4px;\\n  text-indent: 8px;\\n  grid-column: 4 / 4;\\n}\\n.reset-btn::-moz-focus-inner {\\n  border: 0;\\n  padding: 0;\\n}\\n.reset-btn:focus {\\n  outline: none;\\n}\\n.ant-table-pagination.ant-pagination {\\n  margin: 16px 0;\\n  float: right;\\n  margin-right: 8px;\\n}\\nh3.summary-title {\\n  font-size: 20px;\\n  text-indent: 8px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js?{\"javascriptEnabled\":true}!./src/styles/lesson-management.less\n// module id = 1290\n// module chunks = 22"],"sourceRoot":""}